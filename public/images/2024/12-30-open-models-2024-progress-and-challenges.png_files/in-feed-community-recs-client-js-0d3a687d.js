import"./show-more-grid-7be578c9.js";import{a as e,_ as s,c5 as t,e as i,v as n,t as o,ax as r,az as a,ay as c,g as l,k as d}from"./shell-091aa980.js";import{V as h}from"./view-consume-tracking-controller-e69f9d51.js";import{t as m,a as u,b,c as p,d as y}from"./community-recommendations-158d707c.js";import{s as v,x as C,i as f}from"./icon-bd54b9fa.js";let k=class extends v{constructor(){super(),this._handleCommunityJoin=this.handleCommunityJoin.bind(this),this._subscribed=!1,this.handleView=()=>{t(this,m())},this.handleConsume=()=>{t(this,u())},new h(this,{consumeThreshold:2e3,onView:this.handleView,onConsume:this.handleConsume})}get joinButton(){return this.querySelector("shreddit-join-button")}connectedCallback(){super.connectedCallback(),this.joinButton?.addEventListener("click",this._handleCommunityJoin)}disconnectedCallback(){super.disconnectedCallback(),this.joinButton?.removeEventListener("click",this._handleCommunityJoin)}handleCommunityJoin(){t(this,b(this._subscribed)),this._subscribed=!this._subscribed}render(){return C`<slot></slot>`}};k.styles=[e],k=s([i("community-recommendation")],k);const g=n(v);let w=class extends g{constructor(){super(...arguments),this.isHidden=!1,this._onDismiss=async e=>{e.stopPropagation();try{if(!await r(a.Dismiss,c.PersonalizedCommunityRecommendationsInHomeFeed))return void this.dispatchError();this.isHidden=!0,this.onSuccessfulDismissAlert()}catch(e){this.dispatchError()}t(this,p())}}static get styles(){return[e,f`:host{display:contents}`]}connectedCallback(){super.connectedCallback(),this.enableObserver({rootMargin:"0px",threshold:[1]});this.querySelector(".hide-feed-item-icon")?.addEventListener("click",this._onDismiss)}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver();this.querySelector(".hide-feed-item-icon")?.removeEventListener("click",this._onDismiss)}observerIsIntersectingCallback(){t(this,y()),this.disableObserver()}dispatchError(){const e=l("faceplate-alert",{level:d.error,message:"Something went wrong. Try again later."});this.dispatchEvent(e)}onSuccessfulDismissAlert(){const e=l("faceplate-alert",{level:d.notice,message:"Youâ€™ll see fewer recommendations like this"});this.dispatchEvent(e)}render(){return C` ${this.isHidden?C`<slot name="hidden-recommendation-unit"></slot>`:C` <div class="flex justify-between"> <slot name="title"></slot> <slot name="menu"></slot> </div> <slot name="recommendations"></slot> `} `}};s([o()],w.prototype,"isHidden",void 0),w=s([i("in-feed-community-recommendations")],w);
//# sourceMappingURL=in-feed-community-recs-client-js-0d3a687d.js.map
