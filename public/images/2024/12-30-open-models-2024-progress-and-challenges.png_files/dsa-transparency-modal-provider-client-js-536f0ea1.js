import"./dsa-transparency-modal-f7e9eb74.js";import{a as s,_ as t,n as a,w as e,t as i,r,aB as n,c6 as o,J as p,q as d,e as c}from"./shell-091aa980.js";import{s as l,x as h}from"./icon-bd54b9fa.js";import"./faceplate-modal-0f0c31b7.js";import"./faceplate-bottom-sheet-eb6763cf.js";import"./TinyGesture-6f7cc1aa.js";let m=class extends l{constructor(){super(),this.postId="",this.impressionId="",this.placement="",this.pubsub=new r(this),this._activateFeature=async s=>n(s),this.initDsaTransparencyModal=async s=>{this.target=s.target,this.postId=s.postId,this.adUserTargetingInfo=s.adUserTargetingInfo,this.impressionId=s.impressionId,this.placement=s.placement;const{gender:t,interests:a,locations:e,targetingCriteria:i}=this.adUserTargetingInfo,r={};t&&(r.gender=`${t}`),a&&a.length>0&&(r.interests=`${a.toString()}`),e&&e.length>0&&(r.locations=`${e.join("-")}`),i&&i.length>0&&(r.targeting_criteria=`${i.toString()}`),await this._activateFeature({name:o,queryParams:{post_id:this.postId,impression_id:this.impressionId,is_desktop:!!this.isDesktop,placement:this.placement.toString(),...r},renderMode:p.Contents});const n=this.querySelector("dsa-transparency-modal");n&&n.initModal()},this.closeDsaTransparencyModal=async()=>{await(this.dsaTransparencyModal?.updateComplete),this.target?.focus()},this.addEventListener("dsa-transparency-modal-close",this.closeDsaTransparencyModal)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(d.DsaTransparencyModal,this.initDsaTransparencyModal,!1)}disconnectedCallback(){this.pubsub.unsubscribe(d.DsaTransparencyModal,this.initDsaTransparencyModal),super.disconnectedCallback()}render(){return h`<slot></slot>`}};m.styles=[s],t([a({type:Boolean,attribute:"is-desktop"})],m.prototype,"isDesktop",void 0),t([e("dsa-transparency-modal")],m.prototype,"dsaTransparencyModal",void 0),t([i()],m.prototype,"postId",void 0),t([i()],m.prototype,"impressionId",void 0),t([i()],m.prototype,"adUserTargetingInfo",void 0),t([i()],m.prototype,"placement",void 0),m=t([c("dsa-transparency-modal-provider")],m);
//# sourceMappingURL=dsa-transparency-modal-provider-client-js-536f0ea1.js.map
